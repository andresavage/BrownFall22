---
jupytext:
  text_representation:
    extension: .md
    format_name: myst
    format_version: 0.13
    jupytext_version: 1.14.1
kernelspec:
  display_name: Python 3
  language: python
  name: python3
---

# Data Frames and other iterables

Today, we're going to explore {term}`DataFrame`s in greater detail. We'll continue using
that same coffee dataset.

```{code-cell} ipython3
import pandas as pd
```

```{code-cell} ipython3
coffee_data_url = 'https://raw.githubusercontent.com/jldbc/coffee-quality-database/master/data/robusta_data_cleaned.csv'
```

```{code-cell} ipython3
coffee_df =pd.read_csv(coffee_data_url)
```

```{important}
A reason to use Jupyter is that it formats the output to be more readable.  Compare the view of the DataFrame with jupyter and without.  

Jupyter uses the object's `to_html` method if it exists, where the `print` function casts the object to a string.
```

```{code-cell} ipython3
coffee_df
```

```{code-cell} ipython3

print(coffee_df)
```


## Examining the Structure of a Data Frame

I told you this was a DataFrame, but we can check with type.

```{code-cell} ipython3
type(coffee_df)
```
We can also see that the DataFrame type comes from the `pandas` library, without the library loaded this type does not exist.


We can also exmaine its parts.  It consists of several; first the column headings

```{code-cell} ipython3
coffee_df.columns
```

These are a special type called Index
```{code-cell} ipython3
type(coffee_df.columns)
```

These are still iterable, much like python lists.


and it stores the data
```{code-cell} ipython3
coffee_df.values
```


It also has an index (first column, visually) but it is special because this is how you can index the data.

```{code-cell} ipython3
coffee_df.index
```

Right now this is an autogenerated index, but we can also use the `index_col` parameter to set that up front.

```{code-cell} ipython3
coffee_df = pd.read_csv(coffee_data_url,index_col=0)
coffee_df
```

```{code-cell} ipython3
coffee_df.index
```
Now it's neater


## Extracting Parts of Data Frames

We can look at the first 5 rows with `head`
```{code-cell} ipython3
coffee_df.head()
```

````{margin}
```{admonition} Try it yourself
How can you look at the first 3 or last 2 rows?
```
````

and the last 5 with `tail`
```{code-cell} ipython3
coffee_df.tail()
```

the shape of a DataFrame is an attribute
```{code-cell} ipython3
coffee_df.shape
```

```{code-cell} ipython3
len(coffee_df)
```

We can pick out columns by name.
```{code-cell} ipython3
coffee_df['Species']
```

```{important}
We did not do this step in class
```

We can pick out rows with `loc`
```{code-cell} ipython3
coffee_df.loc[0]
```

## Reading data from websites

We'll first read from the course website.
```{note}
This is our first bit of web scraping!
We will do more, but for very structured data it can be this easy
```

```{code-cell} ipython3
comm_url = 'https://rhodyprog4ds.github.io/BrownFall22/syllabus/communication.html#'
```


So far, we've read data in from a .csv file with `pd.read_csv` and created a DataFrame with the constructor `pd.DataFrame` using a dictionary. Pandas provides many interfaces for reading in data.  They're described on the [Pandas IO page](https://pandas.pydata.org/docs/reference/io.html).

````{margin}
```{note}
Using the documentation for a library (and the base language) is
totally expected and normal part of programming.  That's what you
should use as your primary source for questions in this class.  Other
sources can become outdated pretty quickly as the language changes, but
most of the libraries we'll use have processes in place to ensure that
their own documentation gets updated at the same time the code does.
```

```{warning}
If you use other sources and get advised to solutions that are deprecated you may not earn achievements for that work.
```
````

We can use the `read_html` method to read from this page.  We know that it has multiple tables on the page, and from the help, we know that it will return a list of DataFrames.


```{code-cell} ipython3
df_list = pd.read_html(comm_url)
```

We can also verify what it returns

```{code-cell} ipython3
type(df_list)
```

We can index with `[]` to pick one item from the list and verify that it is a DataFrame.
```{code-cell} ipython3
type(df_list[0])
```

## Pythonic Loops

In Python, loops do not require an iterator variable.  It has an interable object and a loop variable.

```Python
for loop_variable in iterable_object:
    # loop body
```

the `loop_variable` takes on the value of each item in the `iterable_object`
each time it goes through, in order.  Writing loops this way makes them more
compact and more readable, this is more like English.  For example:

```{code-cell} ipython3
name = 'sarah'
for letter in name:
    print(letter.upper())
```

It is best to name variables so that the loop variable makes sense as an item from the iterable. For example, names have letters in them, and an item in `df_list` makes sense as `df`.  

```{code-cell} ipython3
for df in df_list:
    print(df.shape)
```
## Types Solution


```{warning}
I am using bad variable names here `a`, `b` ,... because these are only as options for a question and we will not use them again
```

````{margin}
This is called a list comprehension.  It allows you to build a list using a for loop all in one step.
````


```{code-cell} ipython3
a = [char for char in 'abcde']
a
```


```{code-cell} ipython3
type(a)
```

````{margin}
This is called a dictionary comprehension.  It allows you to build a dictionary using a for loop all in one step.
````
```{code-cell} ipython3
b = {char:i for i, char in enumerate('abcde')}
b
```

```{code-cell} ipython3
type(b)
```

```{code-cell} ipython3
c = ('a','b','c','d','e')
c
```

```{code-cell} ipython3
type(c)
```

```{code-cell} ipython3
d = 'a b c d e'.split('')
d
```

```{code-cell} ipython3
type(d)
```

```{code-cell} ipython3

```




## Questions After Class

### what is a dictionary in python?

a dictionary is a datatype from base python that stores key, value pairs.

For example
```{code-cell} ipython3
prof_info = {'first':'Sarah', 'last':'Brown', 'title':'Dr.'}
prof_info
```

We can use the keys to index in and get the values out

```{code-cell} ipython3
prof_info['title']
```

Even though we will mostly use DataFrame, dictionaries and other base python types are important.  Dictionaries are very powerful they can hold whole functions in them. For example, the Python language does not have a switch case (which can be used for handling many if/else cases) but instead dictionaries can be used for that.

```{admonition} Further Reading
You can read more about the [details of data types](https://pandas.pydata.org/docs/user_guide/basics.html#basics-dtypes) in Pandas in the documentation
```

### How to see unique values in a column

We will get to this soon! We got the first part, picking out a single column to look at, we will see the method for that probably on Monday, but maybe on Friday.
